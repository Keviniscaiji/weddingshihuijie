<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>婚姻系统正式上线</title>
    <style>
      html,
      body {
        margin: 0;
        height: 100%;
        background: linear-gradient(180deg, #3b0000 0%, #120007 60%);
        overflow: hidden;
        font-family: ui-monospace, Menlo, Monaco, Consolas, monospace;
      }
      canvas {
        position: fixed;
        inset: 0;
      }
      .panel {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }
      .terminal {
        width: min(920px, 92vw);
        background: linear-gradient(
          180deg,
          rgba(40, 6, 6, 0.75),
          rgba(20, 4, 4, 0.65)
        );
        border-radius: 18px;
        padding: 24px;
        box-shadow: 0 10px 50px rgba(255, 200, 80, 0.12),
          0 0 30px rgba(255, 120, 60, 0.06);
        border: 1px solid rgba(255, 200, 80, 0.18);
        backdrop-filter: blur(6px);
      }
      .header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 14px;
      }
      .dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }
      .red {
        background: #ff5a5a;
        box-shadow: 0 0 8px rgba(255, 90, 90, 0.6);
      }
      .yellow {
        background: #ffd166;
        box-shadow: 0 0 8px rgba(255, 209, 102, 0.5);
      }
      .green {
        background: #7affc6;
        box-shadow: 0 0 8px rgba(122, 255, 198, 0.35);
      }
      .title {
        margin-left: 8px;
        font-size: 13px;
        color: rgba(255, 235, 190, 0.95);
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .heart {
        width: 14px;
        height: 14px;
        display: inline-block;
        background: radial-gradient(
          circle at 30% 30%,
          #fff0a0,
          #ffb3b3 40%,
          #ff4d6d 80%
        );
        clip-path: path(
          "M10 3.6c-1.2-1.3-3.2-1.3-4.5 0C3.7 4.7 3.7 6.6 5 8l5 5 5-5c1.3-1.4 1.3-3.3 0-4.4-1.3-1.3-3.3-1.3-4.5 0L10 3.6z"
        );
      }
      .output {
        white-space: pre-wrap;
        font-size: clamp(14px, 1.8vw, 18px);
        line-height: 1.6;
        color: rgba(255, 245, 230, 0.98);
        text-shadow: 0 0 12px rgba(255, 200, 80, 0.08);
        min-height: 280px;
      }
      .cursor {
        display: inline-block;
        width: 10px;
        height: 1.1em;
        background: linear-gradient(180deg, #ffd166, #ffb86b);
        margin-left: 2px;
        animation: blink 1s infinite;
        box-shadow: 0 0 8px rgba(255, 180, 60, 0.8);
      }
      @keyframes blink {
        50% {
          opacity: 0;
        }
      }
      .footer {
        margin-top: 10px;
        font-size: 12px;
        color: rgba(255, 220, 160, 0.85);
        display: flex;
        justify-content: space-between;
      }
      /* 小屏时稍微压缩边距 */
      @media (max-width: 520px) {
        .terminal {
          padding: 16px;
          border-radius: 12px;
        }
      }
    </style>
  </head>

  <body>
    <canvas id="bg"></canvas>

    <div class="panel">
      <div class="terminal">
        <div class="header">
          <div class="dot red"></div>
          <div class="dot yellow"></div>
          <div class="dot green"></div>
          <div class="title">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              aria-hidden
            >
              <path
                d="M12 21s-7.5-4.7-9.2-8.1C1.9 9.7 6.1 5 12 9.1 17.9 5 22.1 9.7 21.2 12.9 19.5 16.3 12 21 12 21z"
                fill="#ffd166"
              />
            </svg>
            婚姻系统控制台 · 喜庆版
          </div>
        </div>
        <div class="output" id="out"></div>
        <span class="cursor"></span>
        <div class="footer">
          <div id="time"></div>
          <div id="state">运行中</div>
        </div>
      </div>
    </div>

    <script>
      const out = document.getElementById("out");
      const timeBox = document.getElementById("time");
      const stateBox = document.getElementById("state");

      const script = [
        "系统初始化中...",
        "核心模块加载完毕。",
        "婚姻系统Ver 2.0 已成功上线。",
        "兼容模块：日常陪伴、共同成长、相互支持，运行稳定。",
        "提示：此系统将持续更新，建议定期沟通维护。",
        "",
        "在这个特别的日子里，",
        "愿你们：",
        "在平淡的日子里共享晨昏与四季，",
        "在需要时成为彼此最可靠的支撑。",
        "既有独立的风景，也有共同的远方。",
        "",
        "祝新婚愉快，生活踏实温暖。",
        "From 凯文",
        "",
      ];

      let line = 0;
      let char = 0;
      let buffer = "";

      function typeNext() {
        if (line >= script.length) {
          stateBox.textContent = "已完成";
          return;
        }
        const current = script[line];
        if (char < current.length) {
          buffer += current[char];
          char++;
        } else {
          buffer += "\n";
          line++;
          char = 0;
        }
        out.textContent = buffer;
        setTimeout(typeNext, 38);
      }

      function updateTime() {
        const d = new Date();
        const p = (n) => String(n).padStart(2, "0");
        timeBox.textContent =
          d.getFullYear() +
          "年" +
          p(d.getMonth() + 1) +
          "月" +
          p(d.getDate()) +
          "日 " +
          p(d.getHours()) +
          ":" +
          p(d.getMinutes()) +
          ":" +
          p(d.getSeconds());
      }

      setInterval(updateTime, 1000);
      updateTime();
      typeNext();

      /* 背景 — 彩带/彩纸与烟花 */
      const canvas = document.getElementById("bg");
      const ctx = canvas.getContext("2d");
      function resize() {
        canvas.width = innerWidth;
        canvas.height = innerHeight;
      }
      window.addEventListener("resize", resize);
      resize();

      const confettiColors = [
        "#ff4d6d",
        "#ffd166",
        "#ffb86b",
        "#7affc6",
        "#ff8bd6",
      ];
      const confetti = Array.from({ length: 160 }, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height - canvas.height,
        w: 6 + Math.random() * 12,
        h: 8 + Math.random() * 18,
        v: 0.8 + Math.random() * 2.4,
        rot: Math.random() * Math.PI * 2,
        vr: (Math.random() - 0.5) * 0.2,
        color:
          confettiColors[Math.floor(Math.random() * confettiColors.length)],
      }));

      const fireworks = [];

      function spawnFirework() {
        const x = 80 + Math.random() * (canvas.width - 160);
        const y = 60 + Math.random() * (canvas.height * 0.4);
        const count = 16 + Math.floor(Math.random() * 24);
        const baseColor =
          confettiColors[Math.floor(Math.random() * confettiColors.length)];
        for (let i = 0; i < count; i++) {
          fireworks.push({
            x,
            y,
            vx: Math.cos((i / count) * Math.PI * 2) * (1 + Math.random() * 3),
            vy: Math.sin((i / count) * Math.PI * 2) * (1 + Math.random() * 3),
            life: 40 + Math.random() * 40,
            age: 0,
            color: baseColor,
            size: 1 + Math.random() * 3,
          });
        }
      }

      let frame = 0;
      function draw() {
        frame++;
        // 背景轻微叠加，加一点暗红雾
        ctx.fillStyle = "rgba(18,4,4,0.25)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // 绘制彩带/彩纸
        confetti.forEach((p) => {
          p.x += Math.sin(frame * 0.01 + p.rot) * 0.6;
          p.y += p.v;
          p.rot += p.vr;
          if (p.y > canvas.height + 40) {
            p.y = -40 - Math.random() * 200;
            p.x = Math.random() * canvas.width;
          }
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
          ctx.restore();
        });

        // 随机触发烟花（概率）
        if (Math.random() < 0.02) spawnFirework();

        // 绘制烟花粒子
        for (let i = fireworks.length - 1; i >= 0; i--) {
          const f = fireworks[i];
          f.x += f.vx * 0.8;
          f.y += f.vy * 0.8;
          f.vy += 0.06; // 重力
          f.age++;
          const t = f.age / f.life;
          const alpha = Math.max(0, 1 - t);
          ctx.beginPath();
          ctx.fillStyle = f.color;
          ctx.globalAlpha = alpha;
          ctx.arc(f.x, f.y, f.size * (1 + t * 1.5), 0, Math.PI * 2);
          ctx.fill();
          ctx.globalAlpha = 1;
          if (f.age > f.life) fireworks.splice(i, 1);
        }

        // 轻微前景亮点，营造庆祝氛围
        if (frame % 6 === 0) {
          const sx = Math.random() * canvas.width;
          const sy = Math.random() * (canvas.height * 0.3);
          ctx.fillStyle = "rgba(255,220,140,0.06)";
          ctx.beginPath();
          ctx.ellipse(
            sx,
            sy,
            40 + Math.random() * 60,
            6 + Math.random() * 20,
            0,
            0,
            Math.PI * 2
          );
          ctx.fill();
        }

        requestAnimationFrame(draw);
      }
      draw();
    </script>
  </body>
</html>
